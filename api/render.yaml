services:
  - type: web
    name: waste-classifier-api
    runtime: python
    region: frankfurt
    plan: free
    
    buildCommand: |
      echo "ğŸ“ Current directory contents:"
      ls -la
      echo "ğŸ“ Looking for requirements.txt:"
      find . -name "requirements.txt"
      pip install --upgrade pip
      pip3 install -r requirements.txt
      
      echo "ğŸ“¥ Downloading model from Google Drive..."
      mkdir -p models
      curl -L -o models/MobileNetV2_retrained_best.h5 "https://drive.google.com/uc?export=download&id=16H4qASr6bNMnm34PVy85KfanxySBk88s"
      echo "âœ… Model downloaded."

    startCommand: gunicorn -w 1 -b 0.0.0.0:$PORT app:app